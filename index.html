<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReWear - Smart Fashion Management</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app">
        <header class="header">
            <div class="header-container">
                <button class="mobile-menu-btn" onclick="openMobileMenu(event)">‚ò∞</button> 
                
                <div class="logo">
                    <img src="rewear.png" alt="ReWear Logo" class="logo-image"> <span>ReWear</span>
                </div>
                
                <nav class="nav-tabs">
                    <button class="nav-tab active" onclick="showPage('dashboard', event)">Dashboard</button>
                    <button class="nav-tab" onclick="showPage('wardrobe', event)">Lemari Digital</button>
                    <button class="nav-tab" onclick="showPage('shopping', event)">Shopping Assistant</button>
                    <button class="nav-tab" onclick="showPage('marketplace', event)">Marketplace</button>
                    <button class="nav-tab" onclick="showPage('care', event)">Fashion Care</button>
                    <button class="nav-tab" onclick="showPage('community', event)">Komunitas</button>
                </nav>
                
                <div class="user-profile">
                    <div class="profile-avatar" onclick="showProfilePage()">D</div>
                </div>
            </div>
        </header>

        <main class="main-content">
            <div class="container">
                <div id="dashboard" class="page active">
                    <div class="dashboard-grid">
                        <div class="main-stats">
                            <div class="stat-card" onclick="showItemBreakdown()">
                                <div class="stat-icon">üëó</div>
                                <div class="stat-number" id="totalItems">0</div>
                                <div class="stat-label">Total Items</div>
                            </div>
                            <div class="stat-card" onclick="showValueBreakdown()">
                                <div class="stat-icon">üí∞</div>
                                <div class="stat-number" id="totalValue">Rp 0</div>
                                <div class="stat-label">Total Value</div>
                            </div>
                            <div class="stat-card" onclick="showCostPerWearAnalysis()">
                                <div class="stat-icon">üìä</div>
                                <div class="stat-number" id="avgCostPerWear">Rp 0</div>
                                <div class="stat-label">Avg Cost/Wear</div>
                            </div>
                            <div class="stat-card" onclick="showSustainabilityTips()">
                                <div class="stat-icon">‚ôªÔ∏è</div>
                                <div class="stat-number" id="sustainabilityScore">0%</div>
                                <div class="stat-label">Sustainability Score</div>
                            </div>
                        </div>
                        
                        <div class="quick-actions">
                            <h3>Quick Actions</h3>
                            <button class="action-btn" onclick="openModal('cameraScanModal')">+ Scan Item Baru</button>
                            <button class="action-btn" onclick="generateOutfit()"> Generate Outfit</button>
                            <button class="action-btn" onclick="showPage('marketplace', event)">Browse Marketplace</button>
                            <button class="action-btn" onclick="viewImpact()">Lihat Impact Saya</button>
                            <button class="action-btn" onclick="showTradePage()">Trade Items</button>
                            <button class="action-btn" onclick="showDonationOptions()">Donasi Pakaian</button>
                        </div>
                    </div>
                    
                    <div id="recentActivity" class="recent-activity">
                        <h3>Aktivitas Terbaru & Rekomendasi</h3>
                        <div id="activityList">
                            <div class="challenge-card">
                                <h4>Items Sering Dipakai</h4>
                                <div id="frequentItemsList"></div>
                                <button class="btn-primary" onclick="showFrequentItemsDetail()" style="margin-top: 1rem;">Lihat Detail</button>
                            </div>
                            
                            <div class="challenge-card">
                                <h4>Items Jarang Dipakai</h4>
                                <div id="rareItemsList"></div>
                                <button class="btn-primary" onclick="showRareItemsSuggestions()" style="margin-top: 1rem;">Styling Tips</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="wardrobe" class="page">
                    <div class="wardrobe-container">
                        <div class="wardrobe-sidebar">
                            <div class="filter-section">
                                <h4>Kategori</h4>
                                <div class="filter-options">
                                    <label class="filter-option">
                                        <input type="checkbox" value="all" checked onchange="filterItems()"> Semua
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" value="tops" onchange="filterItems()"> Atasan
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" value="bottoms" onchange="filterItems()"> Bawahan
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" value="dresses" onchange="filterItems()"> Dress
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" value="outerwear" onchange="filterItems()"> Outerwear
                                    </label>
                                </div>
                            </div>
                            
                            <div class="filter-section">
                                <h4>Warna</h4>
                                <div class="filter-options">
                                    <label class="filter-option">
                                        <input type="checkbox" value="black" onchange="filterItems()"> Hitam
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" value="white" onchange="filterItems()"> Putih
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" value="blue" onchange="filterItems()"> Biru
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" value="red" onchange="filterItems()"> Merah
                                    </label>
                                </div>
                            </div>
                            
                            <div class="filter-section">
                                <h4>Frequency</h4>
                                <div class="filter-options">
                                    <label class="filter-option">
                                        <input type="checkbox" value="frequent" onchange="filterItems()"> Sering (10+ kali)
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" value="moderate" onchange="filterItems()"> Jarang (1-10 kali)
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" value="never" onchange="filterItems()"> Belum Pernah
                                    </label>
                                </div>
                            </div>
                            
                            <div class="filter-section">
                                <h4>AI Recommendations</h4>
                                <button class="btn-primary" onclick="showColorPalette()" style="width: 100%; margin: 0.5rem 0;">üé® Color Palette</button>
                                <button class="btn-primary" onclick="showWeatherRecommendations()" style="width: 100%; margin: 0.5rem 0;">üå§Ô∏è Weather Outfit</button>
                                <button class="action-btn" onclick="generateOutfit()" style="width: 100%; margin: 0.5rem 0;">‚ú® Mix & Match</button>
                            </div>
                        </div>
                        
                        <div class="wardrobe-main">
                            <div class="wardrobe-header">
                                <h2>Lemari Digital Saya</h2>
                                <button class="add-item-btn" onclick="openModal('cameraScanModal')">
                                    + Scan Item Baru
                                </button>
                            </div>
                            <div id="itemsGrid" class="items-grid">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="shopping" class="page">
                    <div class="shopping-container">
                        <div class="shopping-main">
                            <h2>Mindful Shopping Assistant</h2>
                            
                            <div class="budget-tracker">
                                <h3>Budget Bulanan & Spending Control</h3>
                                <div class="budget-info">
                                    <span>Terpakai: Rp <span id="spentAmount">0</span> / Rp <span id="budgetLimit">2000000</span></span>
                                    <span id="budgetPercentage">0%</span>
                                </div>
                                <div class="budget-bar">
                                    <div id="budgetFill" class="budget-fill" style="width: 0%"></div>
                                </div>
                                <p style="margin-top: 0.5rem; color: var(--text-light);">Daily purchases: <span id="dailyPurchases">0</span>/2 | Remaining budget: Rp <span id="remainingBudget">2,000,000</span></p>
                            </div>
                            
                            <div class="add-wishlist">
                                <h3>30-Day Cooling Period Wishlist</h3>
                                <div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
                                    <input type="text" id="wishlistItem" class="form-input" placeholder="Nama item yang ingin dibeli" style="flex: 1;">
                                    <input type="number" id="wishlistPrice" class="form-input" placeholder="Harga" style="width: 150px;">
                                    <button class="btn-primary" onclick="addToWishlist()">Tambah</button>
                                </div>
                            </div>
                            
                            <div id="wishlistContainer">
                                <h3>Wishlist Saya</h3>
                                <div id="wishlistItems"></div>
                            </div>
                        </div>
                        
                        <div class="shopping-sidebar">
                            <h3>Smart Shopping Tips</h3>
                            <div class="care-tips">
                                <div>Tanya diri: "Apakah saya benar-benar butuh ini?"</div>
                                <div>Cek apakah ada item serupa di lemari</div>
                                <div>Pertimbangkan cost-per-wear</div>
                                <div>Pilih brand berkelanjutan</div>
                                <div>Wait 30 days untuk non-essential items</div>
                                <div>Consider secondhand or rental options</div>
                            </div>
                            
                            <div class="sustainability-checker" style="margin-top: 2rem; padding: 1.5rem; background: var(--cream); border-radius: 15px;">
                                <h4>Brand Sustainability Checker</h4>
                                <input type="text" id="brandChecker" class="form-input" placeholder="Nama brand" style="margin: 1rem 0;">
                                <button class="btn-primary" onclick="checkBrandSustainability()">Cek Rating</button>
                                <div id="brandResult" style="margin-top: 1rem;"></div>
                            </div>
                            
                            <div style="margin-top: 2rem; padding: 1.5rem; background: var(--light-green); border-radius: 15px; color: var(--forest-green);">
                                <h4>üèÜ Your Rewards</h4>
                                <p>Trade Points: <strong id="tradePoints">150</strong></p>
                                <p>Items Donated: <strong id="itemsDonated">8</strong></p>
                                <p>Level: <strong id="userLevel">Gold Sustainer</strong></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="marketplace" class="page">
                    <div class="marketplace-header">
                        <h2>Sustainable Marketplace</h2>
                        <div class="search-bar">
                            <input type="text" class="search-input" id="searchInput" placeholder="Cari item, brand, atau kategori..." onkeypress="handleSearchKeypress(event)">
                            <button class="search-btn" onclick="searchProducts()">üîç</button>
                        </div>
                    </div>
                    
                    <div class="marketplace-filters">
                        <button class="filter-chip active" onclick="filterProducts('all', event)">Semua</button>
                        <button class="filter-chip" onclick="filterProducts('secondhand', event)">Secondhand</button>
                        <button class="filter-chip" onclick="filterProducts('sustainable', event)">Brand Berkelanjutan</button>
                        <button class="filter-chip" onclick="filterProducts('local', event)">Artisan Lokal</button>
                        <button class="filter-chip" onclick="filterProducts('rental', event)">Rental</button>
                    </div>
                    
                    <div id="productsGrid" class="products-grid">
                    </div>
                </div>
                
                <div id="tradePage" class="page">
                    <h2 style="margin-bottom: 2rem;">ReWear Item Trading Hub</h2>
                    <div id="tradeOffersList">
                        </div>
                    <p style="margin-top: 2rem; color: var(--text-light); text-align: center;">Item yang tersedia untuk Trade adalah item dengan *wear count* kurang dari 3.</p>
                </div>

                <div id="care" class="page">
                    <h2>Fashion Care Hub</h2>
                    
                    <div class="care-sections">
                        <div class="care-section">
                            <h3>
                                <div class="care-icon">üß∫</div>
                                Panduan Perawatan
                            </h3>
                            <div class="care-tips">
                                <div>Pisahkan pakaian berdasarkan warna dan jenis kain</div>
                                <div>Gunakan air dingin untuk warna gelap</div>
                                <div>Jangan gunakan bleach untuk kain berwarna</div>
                                <div>Jemur di tempat teduh untuk mencegah luntur</div>
                                <div>Setrika pada suhu yang sesuai dengan jenis kain</div>
                                <div>Simpan dengan hanger yang tepat</div>
                                <div>Gunakan lavender bags untuk aroma alami</div>
                            </div>
                        </div>
                        
                        <div class="care-section">
                            <h3>
                                <div class="care-icon">üîß</div>
                                Tutorial Reparasi
                            </h3>
                            <div class="tutorial-list">
                                <button class="tutorial-btn" onclick="showTutorial('button')">Cara Jahit Kancing</button>
                                <button class="tutorial-btn" onclick="showTutorial('hole')">Menambal Lubang Kecil</button>
                                <button class="tutorial-btn" onclick="showTutorial('zipper')">Memperbaiki Resleting</button>
                                <button class="tutorial-btn" onclick="showTutorial('hem')">Memendekkan Celana</button>
                            </div>
                        </div>
                        
                        <div class="care-section">
                            <h3>
                                <div class="care-icon">üìç</div>
                                Penjahit Terdekat
                            </h3>
                            <div id="tailorList" class="tailor-list">
                                <div class="tailor-item" onclick="showTailorDetails('Jahit Ekspres Bu Sari')">
                                    <h4>Jahit Ekspres Bu Sari</h4>
                                    <p>üìç Tangerang Selatan - 2.3km</p>
                                    <p>‚≠ê 4.8/5 (127 review)</p>
                                    <p>üí∞ Rp 15.000 - 50.000</p>
                                </div>
                                <div class="tailor-item" onclick="showTailorDetails('Taylor House Premium')">
                                    <h4>Taylor House Premium</h4>
                                    <p>üìç Bintaro - 3.1km</p>
                                    <p>‚≠ê 4.9/5 (89 review)</p>
                                    <p>üí∞ Rp 25.000 - 100.000</p>
                                </div>
                                <div class="tailor-item" onclick="showTailorDetails('Alterasi Cepat Pak Budi')">
                                    <h4>Alterasi Cepat Pak Budi</h4>
                                    <p>üìç Tangerang Kota - 1.8km</p>
                                    <p>‚≠ê 4.7/5 (203 review)</p>
                                    <p>üí∞ Rp 10.000 - 40.000</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="care-section">
                            <h3>
                                <div class="care-icon">‚ôªÔ∏è</div>
                                Upcycling Ideas
                            </h3>
                            <div class="upcycling-ideas">
                                <button class="upcycling-btn" onclick="showUpcyclingSelection()">Mulai Upcycling</button>
                                <button class="upcycling-btn" onclick="showTutorial('upcycling-idea')">Lihat Ide Tutorial</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="community" class="page">
                    <h2>Komunitas & Dampak</h2>
                    
                    <div class="community-tabs">
                        <button class="community-tab active" onclick="showCommunityTab('challenges', event)">Challenges</button>
                        <button class="community-tab" onclick="showCommunityTab('impact', event)">My Impact</button>
                        <button class="community-tab" onclick="showCommunityTab('events', event)">Events</button>
                        <button class="community-tab" onclick="showCommunityTab('education', event)">Edukasi</button>
                    </div>
                    
                    <div id="challengesTab" class="community-content active">
                        <div class="challenge-card">
                            <div class="challenge-header">
                                <h3 class="challenge-title">30-Day No-Buy Challenge</h3>
                                <span class="challenge-status">Aktif</span>
                            </div>
                            <p>Tantang diri untuk tidak membeli pakaian baru selama 30 hari. Fokus gunakan yang sudah ada!</p>
                            <div style="margin-top: 1rem;">
                                <div>Progress: <span id="noBuyProgress">0</span>/30 hari</div>
                                <div class="budget-bar" style="margin: 0.5rem 0;">
                                    <div class="budget-fill" style="width: 0%"></div>
                                </div>
                                <button class="btn-primary" onclick="updateNoBuyChallenge()" style="margin-top: 1rem;">Update Progress (Harian)</button>
                            </div>
                        </div>
                        
                        <div class="challenge-card">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Weekly Style Challenge</h3>
                                <span class="challenge-status">Baru</span>
                            </div>
                            <p>Tema minggu ini: "Monochrome Magic" - Ciptakan outfit keren dengan 1-2 warna saja!</p>
                            <button class="btn-primary" onclick="joinChallenge()">Join Challenge</button>
                        </div>
                        
                        <div class="challenge-card">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Monthly Trade Challenge</h3>
                                <span class="challenge-status">Tersedia</span>
                            </div>
                            <p>Trade minimal 3 items bulan ini untuk mendapat exclusive badge dan bonus trade points!</p>
                            <div style="margin-top: 1rem;">
                                <div>Progress: 1/3 items traded</div>
                                <button class="btn-primary" onclick="showTradePage()">Start Trading</button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="impactTab" class="community-content">
                        <div class="impact-dashboard">
                            <h3>Environmental Impact Saya</h3>
                            <div class="impact-stats">
                                <div class="impact-stat">
                                    <div class="impact-number">2.5</div>
                                    <div>Ton CO2 Saved</div>
                                </div>
                                <div class="impact-stat">
                                    <div class="impact-number">1,250</div>
                                    <div>Liter Air Saved</div>
                                </div>
                                <div class="impact-stat">
                                    <div class="impact-number">15</div>
                                    <div>Items Donated</div>
                                </div>
                                <div class="impact-stat">
                                    <div class="impact-number">Rp 3.2M</div>
                                    <div>Money Saved</div>
                                </div>
                            </div>
                        </div>
                        <div class="challenge-card">
                            <h3> Sustainability Achievements</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
                                <div style="padding: 1rem; background: var(--cream); border-radius: 12px;">
                                    <div style="font-size: 2rem;">üèÜ</div>
                                    <h4>Gold Sustainer</h4>
                                    <p>150+ trade points</p>
                                </div>
                                <div style="padding: 1rem; background: var(--cream); border-radius: 12px;">
                                    <div style="font-size: 2rem;">üíö</div>
                                    <h4>Generous Donor</h4>
                                    <p>8 items donated</p>
                                </div>
                                <div style="padding: 1rem; background: var(--cream); border-radius: 12px;">
                                    <div style="font-size: 2rem;">üé®</div>
                                    <h4>Creative Upcycler</h4>
                                    <p>3 upcycling projects</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="eventsTab" class="community-content">
                        <div class="challenge-card">
                            <h3>üîÑ Clothing Swap Jakarta</h3>
                            <p>üìÖ Sabtu, 15 Feb 2026 - 14:00-17:00</p>
                            <p>üìç Plaza Senayan, Jakarta</p>
                            <p>Tukar pakaian dengan member lain! Bawa 5 item, pulang dengan 5 item baru.</p>
                            <button class="btn-primary" onclick="joinEvent()">Daftar Sekarang</button>
                        </div>
                        
                        <div class="challenge-card">
                            <h3>üéì Workshop: Sustainable Fashion</h3>
                            <p>üìÖ Minggu, 23 Feb 2026 - 10:00-12:00</p>
                            <p>üìç Online via Zoom</p>
                            <p>Pelajari cara memilih fashion berkelanjutan dan merawat pakaian.</p>
                            <button class="btn-primary" onclick="joinWorkshop()">Join Workshop</button>
                        </div>
                        
                        <div class="challenge-card">
                            <h3>üßµ Upcycling Workshop</h3>
                            <p>üìÖ Sabtu, 1 Mar 2026 - 09:00-15:00</p>
                            <p>üìç Creative Space, Kemang</p>
                            <p>Hands-on workshop mengubah pakaian lama menjadi item baru yang stylish!</p>
                            <button class="btn-primary" onclick="joinUpcyclingWorkshop()">Daftar Workshop</button>
                        </div>
                    </div>
                    
                    <div id="educationTab" class="community-content">
                        <div class="challenge-card">
                            <h3>Sustainable Fashion 101</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 1rem;">
                                <div style="padding: 1rem; background: var(--cream); border-radius: 12px;">
                                    <h4>Eco-Friendly Materials</h4>
                                    <p>Pelajari bahan-bahan ramah lingkungan dan cara mengidentifikasinya.</p>
                                    <button class="btn-primary" onclick="showEducationContent('materials')">Learn More</button>
                                </div>
                                <div style="padding: 1rem; background: var(--cream); border-radius: 12px;">
                                    <h4> Water Conservation</h4>
                                    <p>Dampak industri fashion terhadap air dan cara menguranginya.</p>
                                    <button class="btn-primary" onclick="showEducationContent('water')">Learn More</button>
                                </div>
                                <div style="padding: 1rem; background: var(--cream); border-radius: 12px;">
                                    <h4>Circular Economy</h4>
                                    <p>Konsep ekonomi sirkular dalam industri fashion.</p>
                                    <button class="btn-primary" onclick="showEducationContent('circular')">Learn More</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="profilePage" class="page">
                    <div class="wardrobe-container" style="grid-template-columns: 1fr;">
                        <div class="wardrobe-main" style="max-width: 600px; margin: 0 auto;">
                            <h2 style="margin-bottom: 2rem;">Edit Profil & Pengaturan Akun</h2>

                            <div style="text-align: center; margin-bottom: 2rem;">
                                <div class="profile-avatar" style="width: 80px; height: 80px; font-size: 2rem; margin: 0 auto 1rem;">D</div>
                                <h3 id="profileUserName" style="color: var(--forest-green);">Diajeng (Gold Sustainer)</h3>
                                <p id="profileUserEmail" style="color: var(--text-light);">user@rewear.app</p>
                                <p style="margin-top: 1rem; font-size: 0.9rem;">Poin Trade: <strong id="profileTradePoints">150</strong> | Level: <strong id="profileUserLevel">Gold Sustainer</strong></p>
                            </div>

                            <div class="form-group">
                                <label for="editName" class="form-label">Nama Lengkap</label>
                                <input type="text" id="editName" class="form-input" placeholder="Nama Anda">
                            </div>

                            <div class="form-group">
                                <label for="editEmail" class="form-label">Email</label>
                                <input type="email" id="editEmail" class="form-input" placeholder="Email Anda">
                            </div>

                            <div class="form-group">
                                <label for="editLocation" class="form-label">Lokasi (untuk layanan terdekat)</label>
                                <input type="text" id="editLocation" class="form-input" placeholder="Misal: Jakarta Selatan">
                            </div>

                            <h3 style="margin-top: 2rem; margin-bottom: 1rem; color: var(--forest-green);">Pengaturan Budget</h3>
                            <div class="form-group">
                                <label for="editBudget" class="form-label">Batas Budget Belanja Bulanan (Rp)</label>
                                <input type="number" id="editBudget" class="form-input" placeholder="Misal: 2000000">
                            </div>

                            <button class="btn-primary" onclick="saveProfileChanges()" style="width: 100%; margin-top: 1.5rem;">Simpan Perubahan Profil</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="mobileMenuModal" class="modal">
        <div class="modal-content" style="max-width: 300px; padding: 1rem;"> 
            <button class="close-btn" onclick="closeModal('mobileMenuModal')">&times;</button>
            <h3 style="color: var(--forest-green); margin-bottom: 1rem;">Menu Navigasi</h3>
            <nav class="nav-tabs-mobile" style="flex-direction: column; background: none; padding: 0;">
                <button class="nav-tab active" onclick="showPage('dashboard', event); closeModal('mobileMenuModal')">Dashboard</button>
                <button class="nav-tab" onclick="showPage('wardrobe', event); closeModal('mobileMenuModal')">Lemari Digital</button>
                <button class="nav-tab" onclick="showPage('shopping', event); closeModal('mobileMenuModal')">Shopping Assistant</button>
                <button class="nav-tab" onclick="showPage('marketplace', event); closeModal('mobileMenuModal')">Marketplace</button>
                <button class="nav-tab" onclick="showPage('care', event); closeModal('mobileMenuModal')">Fashion Care</button>
                <button class="nav-tab" onclick="showPage('community', event); closeModal('mobileMenuModal')">Komunitas</button>
            </nav>
        </div>
    </div>

    <div id="cameraScanModal" class="modal">
        <div class="modal-content" style="max-width: 450px; text-align: center;">
            <button class="close-btn" onclick="closeModal('cameraScanModal')">&times;</button>
            <h2 style="color: var(--forest-green);">Scan Item Baru</h2>
            
            <p style="margin-bottom: 1rem;">Arahkan kamera ke pakaian Anda.</p>
            
            <video id="cameraVideoFeed" width="100%" height="auto" autoplay style="border-radius:12px; background:#333; display:none; object-fit: cover;"></video>
            <canvas id="canvas" style="display:none;"></canvas>
            
            <img id="photoPreview" src="" alt="Photo Preview" style="width:100%; display:none; margin-top:1rem; border-radius:12px;">
            
            <button class="btn-primary" style="margin-top:1rem;" onclick="takePhoto()">Ambil Foto</button>
            
            <button class="btn-primary" style="margin-top:1rem; display:none;" id="uploadPhotoBtn">Upload Foto & Identifikasi Item</button>
            
            <button class="btn-primary" style="background: #6c757d; margin-top: 0.5rem;" onclick="closeModal('cameraScanModal'); openModal('addItemModal')">Input Manual</button>
        </div>
    </div>

    <div id="addItemModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('addItemModal')">&times;</button>
            <h2>Tambah Item Manual</h2>
            <div class="form-group">
                <label class="form-label">Nama Item</label>
                <input type="text" id="itemName" class="form-input" placeholder="e.g., Blouse Putih H&M">
            </div>
            <div class="form-group">
                <label class="form-label">Kategori</label>
                <select id="itemCategory" class="form-select">
                    <option value="tops">Atasan</option>
                    <option value="bottoms">Bawahan</option>
                    <option value="dresses">Dress</option>
                    <option value="outerwear">Outerwear</option>
                    <option value="accessories">Aksesoris</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Warna Utama</label>
                <select id="itemColor" class="form-select">
                    <option value="black">Hitam</option>
                    <option value="white">Putih</option>
                    <option value="blue">Biru</option>
                    <option value="red">Merah</option>
                    <option value="green">Hijau</option>
                    <option value="yellow">Kuning</option>
                    <option value="pink">Pink</option>
                    <option value="gray">Abu-abu</option>
                    <option value="brown">Coklat</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Harga Beli</label>
                <input type="number" id="itemPrice" class="form-input" placeholder="e.g., 150000">
            </div>
            <div class="form-group">
                <label class="form-label">Brand</label>
                <input type="text" id="itemBrand" class="form-input" placeholder="e.g., H&M, Zara, Local Brand">
            </div>
            <button class="btn-primary" onclick="addNewItem()">Tambah ke Lemari</button>
        </div>
    </div>
    
    <div id="paymentModal" class="modal">
        <div class="modal-content" style="max-width: 400px; text-align: center;">
            <button class="close-btn" onclick="closeModal('paymentModal')">&times;</button>
            <h2 style="color: #667eea;">üí≥ Pembayaran Aman</h2>
            <p style="margin: 1rem 0;">Anda akan diarahkan ke halaman pembayaran yang aman.</p>
            
            <div style="background: #f0f8ff; padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem; border: 1px solid #cceeff;">
                <p>Total Pembelian: <strong id="paymentAmount">Rp 0</strong></p>
                <p>Item: <strong id="paymentItemName">-</strong></p>
            </div>
            
            <div style="display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1rem;">
                <button class="btn-primary" style="background: #1cb0f6;" onclick="completePayment('Midtrans')">Bayar via Midtrans</button>
                <button class="btn-primary" style="background: #00a54f;" onclick="completePayment('GoPay')">Bayar via GoPay</button>
                <button class="btn-primary" style="background: #6610f2;" onclick="completePayment('OVO')">Bayar via OVO</button>
            </div>
            
            <button class="btn-primary" style="background: #dc3545; font-size: 0.8rem; padding: 0.5rem 1rem;" onclick="closeModal('paymentModal')">Batalkan Pembelian</button>
        </div>
    </div>

    <div id="tradeDetailModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('tradeDetailModal')">&times;</button>
            <h2 style="color: var(--forest-green);">ü§ù Detail Penukaran</h2>
            
            <div id="tradeItemInfo" style="margin-bottom: 1.5rem;"></div>

            <h3 style="margin-top: 1.5rem; color: var(--forest-green);">Barang yang Ingin Anda Tukar:</h3>
            <select id="userTradeItemSelect" class="form-select" style="margin-bottom: 1rem;"></select>
            
            <div style="background: #fff3cd; padding: 1rem; border-radius: 12px; margin-bottom: 1.5rem;">
                <p><strong>Status Persetujuan:</strong></p>
                <p>Anda: <strong id="userTradeStatus" style="color: #dc3545;">Belum Setuju</strong></p>
                <p>Penukar: <strong id="partnerTradeStatus" style="color: #dc3545;">Menunggu</strong></p>
            </div>
            
            <button id="agreeTradeBtn" class="btn-primary" onclick="agreeToTrade()" style="width: 100%; margin-bottom: 1rem;">‚úÖ Setujui Penukaran</button>
            <button class="btn-primary" style="background: #6c757d; width: 100%;" onclick="closeModal('tradeDetailModal')">Batalkan</button>
        </div>
    </div>
    
    <div id="donationSelectionModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('donationSelectionModal')">&times;</button>
            <h2 style="color: var(--forest-green);">‚ù§Ô∏è Pilih Item Donasi</h2>
            <p style="margin-bottom: 1.5rem;">Pilih item yang ingin Anda donasikan, terutama yang jarang dipakai (Wear Count &lt; 3).</p>
            
            <div id="donatableItemsList" style="max-height: 250px; overflow-y: auto; padding-right: 10px;">
            </div>
            
            <div class="form-group" style="margin-top: 2rem;">
                <label class="form-label">Pilih Tujuan Donasi</label>
                <select id="donationTargetSelect" class="form-select">
                    <option value="yayasan">Yayasan Peduli Anak (Jakarta Selatan)</option>
                    <option value="panti">Panti Asuhan Kasih Ibu (Tangerang)</option>
                    <option value="individu_lily">Anak Lily (individu, membutuhkan pakaian hangat)</option>
                </select>
            </div>
            
            <button class="btn-primary" onclick="confirmDonation()" style="width: 100%;">Konfirmasi Donasi</button>
        </div>
    </div>
    
    <div id="upcyclingSelectionModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('upcyclingSelectionModal')">&times;</button>
            <h2 style="color: var(--forest-green);">‚ôªÔ∏è Pilih Item Upcycling</h2>
            <p style="margin-bottom: 1.5rem;">Pilih item yang ingin Anda ubah/daur ulang.</p>
            
            <select id="upcycleItemSelect" class="form-select" style="margin-bottom: 1.5rem;">
            </select>
            
            <button class="btn-primary" onclick="startUpcyclingProcess()" style="width: 100%;">Mulai Analisis Upcycling</button>
        </div>
    </div>
    
    <div id="upcyclingLoadingModal" class="modal">
        <div class="modal-content" style="max-width: 400px; text-align: center;">
            <button class="close-btn" onclick="closeModal('upcyclingLoadingModal')">&times;</button>
            <div id="upcyclingProcessContent">
            </div>
        </div>
    </div>

    <div id="mobileMenuModal" class="modal">
        <div class="modal-content" style="max-width: 300px; padding: 1rem;"> 
            <button class="close-btn" onclick="closeModal('mobileMenuModal')">&times;</button>
            <h3 style="color: var(--forest-green); margin-bottom: 1rem;">Menu Navigasi</h3>
            <nav class="nav-tabs-mobile" style="flex-direction: column; background: none; padding: 0;">
                <button class="nav-tab active" onclick="showPage('dashboard', event); closeModal('mobileMenuModal')">Dashboard</button>
                <button class="nav-tab" onclick="showPage('wardrobe', event); closeModal('mobileMenuModal')">Lemari Digital</button>
                <button class="nav-tab" onclick="showPage('shopping', event); closeModal('mobileMenuModal')">Shopping Assistant</button>
                <button class="nav-tab" onclick="showPage('marketplace', event); closeModal('mobileMenuModal')">Marketplace</button>
                <button class="nav-tab" onclick="showPage('care', event); closeModal('mobileMenuModal')">Fashion Care</button>
                <button class="nav-tab" onclick="showPage('community', event); closeModal('mobileMenuModal')">Komunitas</button>
            </nav>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>